{"version":3,"sources":["numl/listbox-bc6e4392.js"],"names":["t","params","input","provideValue","init","isPopup","host","hasAttribute","forceLinkValue","nuListBox","options","setName","setContext","linkContext","linkValue","listbox","popup","setAria","on","onKeyDown","setValue","i","value","setTimeout","activeOption","s","orderedOptions","length","includes","e","indexOf","o","key","isEdgeMoveAllowed","slice","openPopup","target","nu","then","close","nuListBoxHandled","preventDefault","nuPopup","isOpen","button","set","addOption","push","map","filter","find","removeOption","splice","getOptionByValue"],"mappings":"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","file":"listbox-bc6e4392.dd62b142.js","sourceRoot":"..","sourcesContent":["import{W as t,s,d as i,i as e}from\"./index-cb4cc784.js\";export default class extends t{static get params(){return{input:!0,provideValue:!0}}init(){this.isPopup=this.host.hasAttribute(\"nu-popup\"),this.isPopup&&this.forceLinkValue(),this.host.nuListBox=this,this.options=[],super.init(),this.setName(\"listbox\"),this.setContext(\"listbox\",this,!0),this.linkContext(\"button\",t=>{t&&this.linkValue&&(t.listbox=this,t.popup&&t.setAria(\"haspopup\",\"listbox\"))}),this.on(\"keydown\",t=>{this.onKeyDown(t)})}setValue(t,i){t!==this.value&&(super.setValue(t,i),setTimeout(()=>{const t=this.activeOption;t&&s(this.host,t.host)}))}onKeyDown(t){const s=this.orderedOptions,i=this.activeOption;if(!s.length||i&&!s.includes(i))return;const e=s.indexOf(i);let o;switch(t.key){case\"Home\":if(!this.isEdgeMoveAllowed())return;o=s[0].value;break;case\"End\":if(!this.isEdgeMoveAllowed())return;o=s.slice(-1)[0].value;break;case\"ArrowUp\":if(e>0)o=s[e-1].value;else{if(-1!==e)return;o=s.slice(-1)[0].value}this.openPopup();break;case\"ArrowDown\":if(e<s.length-1)o=s[e+1].value;else{if(-1!==e)return;o=s[0].value}this.openPopup();break;case\"Enter\":t.target===this.host&&this.isPopup&&this.nu(\"popup\").then(t=>t.close());default:return}t.nuListBoxHandled=!0,setTimeout(()=>{this.setValue(o)}),t.preventDefault()}isEdgeMoveAllowed(){if(!this.isPopup)return!0;const t=this.host.nuPopup;return!t||t.isOpen}openPopup(){if(!this.isPopup)return;const t=this.host.nuPopup;t&&!t.isOpen&&this.button&&this.button.set(!0,!0)}addOption(t){this.options.includes(t)||this.options.push(t)}get orderedOptions(){const t=this.options.map(t=>t.host);return i(this.host,\"[nu-option]:not([disabled])\").filter(s=>t.includes(s)).map(t=>this.options.find(s=>s.host===t)).filter(t=>t)}get activeOption(){return this.options.find(t=>e(t.value,this.value))}removeOption(t){this.options.includes(t)||this.options.splice(this.options.indexOf(t),1)}getOptionByValue(t){return this.options.find(s=>e(s.value,t))}}\n"]}