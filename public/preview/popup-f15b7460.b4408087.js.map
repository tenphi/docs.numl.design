{"version":3,"sources":["numl/popup-f15b7460.js"],"names":["h","t","nuPopupHandled","o","s","nuButton","popup","host","push","parentNode","target","window","document","forEach","includes","nuPopup","close","p","nuPopupEventsBinded","addEventListener","bind","passive","params","provideValue","contextValue","linkValue","linkHostValue","init","hasAttr","setAttr","setMod","on","stopPropagation","button","key","style","setProperty","removeProperty","connected","nuContext","$shadowRoot","setContext","provideAction","doAction","linkContext","unlinkPopup","linkPopup","disconnected","open","u","focus","nuDeepQuery","isOpen","nu","then","start","openEffect","nuSetAria","emit","setTimeout","end","set","n","hidden"],"mappings":";AAAolB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAplB,IAAA,EAAA,QAAA,uBAAkF,SAASA,EAAEC,GAAMA,GAAAA,EAAEC,eAAe,OAAaC,MAAAA,EAAE,SAASF,GAASE,MAAAA,EAAE,GAAQF,KAAAA,GAAG,CAAOG,MAAAA,EAAEH,EAAEI,SAAYD,GAAAA,GAAGA,EAAEE,MAAM,CAAOL,MAAAA,EAAEG,EAAEE,MAAMC,KAAKN,GAAGE,EAAEK,KAAKP,GAAGA,EAAEA,EAAEQ,YAAYR,EAAEM,KAAYJ,OAAAA,EAAlI,CAAqIF,EAAES,SAAU,EAAA,EAAA,GAAA,OAAOC,OAAOC,SAAS,KAAK,cAAcC,QAAQT,IAAID,EAAEW,SAASV,KAAKA,EAAEW,SAASX,EAAEW,QAAQC,QAAQf,EAAEC,gBAAe,KAAM,SAASe,EAAEhB,GAAGA,EAAEiB,qBAAqB,CAAC,YAAY,aAAa,WAAWL,QAAQV,IAAIF,EAAEkB,iBAAiBhB,EAAEH,EAAEoB,KAAKnB,GAAG,CAACoB,SAAQ,IAAKpB,EAAEiB,qBAAoB,IAAKD,EAAEN,QAAuB,MAAcV,UAAAA,EAAd,EAA2BqB,oBAAe,MAAA,CAACC,cAAa,EAAGC,cAAa,EAAGC,WAAU,EAAGC,eAAc,GAAIC,OAAYpB,KAAAA,KAAKQ,QAAQ,KAAK,MAAMY,OAAO,KAAKC,QAAQ,UAAU,KAAKC,QAAQ,QAAQ,QAAQ,KAAKC,OAAO,SAAQ,GAAI,KAAKC,GAAG,YAAY9B,IAAIA,EAAE+B,oBAAoB,KAAKD,GAAG,QAAQ9B,IAAIA,EAAE+B,oBAAoB,KAAKD,GAAG,UAAU9B,IAAS,MAACgC,OAAO9B,GAAG,KAAgBF,WAAAA,EAAEiC,MAAM/B,GAAG,KAAKa,QAAQf,EAAE+B,mBAAmB,UAAU/B,EAAEiC,KAAK,MAAMjC,EAAEiC,KAAKjC,EAAE+B,oBAAoB,KAAKD,GAAG,aAAa,KAAUE,KAAAA,QAAQ,KAAKA,OAAO1B,KAAK4B,MAAMC,YAAY,wBAAwB,iBAAiB,KAAKL,GAAG,aAAa,KAAUE,KAAAA,QAAQ,KAAKA,OAAO1B,KAAK4B,MAAME,eAAe,2BAA2BC,YAAiB,MAAC/B,KAAKN,GAAG,KAAKE,EAAEF,EAAEsC,UAAUC,YAAYrC,GAAGc,EAAEd,GAAG,KAAKsC,WAAW,QAAQ,MAAM,KAAKC,cAAc,QAAQzC,IAASe,KAAAA,QAAQf,GAAG,KAAK0C,SAAS,WAAW,KAAKC,YAAY,SAAS,CAAC3C,EAAEE,KAAKA,GAAGA,EAAE0C,YAAY,MAAM5C,GAAGA,EAAE6C,UAAU,QAAQ,KAAK9B,OAAM,GAAI+B,eAAoB/B,KAAAA,QAAQ,KAAKiB,QAAQ,KAAKA,OAAOY,YAAY,aAAa,KAAKZ,OAAOe,OAAY,MAACzC,KAAKN,GAAG,KAAcgD,SAAAA,IAAU9C,MAAAA,GAAE,EAAEF,EAAAA,GAAAA,EAAE,gBAAmBE,GAAAA,KAAI,EAAEF,EAAAA,GAAAA,EAAEE,IAAG,EAAEA,EAAAA,GAAAA,IAAI,OAAOA,EAAE+C,SAAQ,EAAO9C,IAAAA,EAASA,OAAAA,GAAE,EAAEH,EAAAA,GAAAA,GAAGA,EAAEA,EAAEkD,YAAY,6DAA6D,EAAE/C,EAAAA,GAAAA,IAAIA,EAAE8C,SAAQ,QAAI,EAAYE,KAAAA,SAASnD,EAAEoD,GAAG,UAAUC,KAAKrD,GAAGA,EAAEsD,SAAS,KAAKC,YAAW,GAAI,KAAKvB,QAAQ,KAAKA,OAAO1B,KAAKkD,UAAU,YAAW,IAAI,EAAExD,EAAAA,GAAAA,GAAG,KAAKyD,KAAK,OAAO,MAAM,KAAKA,KAAK,SAAS,OAAM,EAAEzD,EAAAA,GAAAA,GAAE,GAAIgD,KAAKU,WAAWV,EAAE,MAAMjC,MAAMf,GAAE,GAAS,MAACM,KAAKJ,GAAG,KAAQ,IAAC,KAAKiD,OAAO,OAAUjD,GAAAA,EAAEkD,GAAG,UAAUC,KAAKrD,GAAGA,EAAE2D,OAAO,KAAKJ,YAAW,GAAIvD,EAAE,OAAYgC,KAAAA,SAAS,KAAKA,OAAO4B,KAAI,GAAI,KAAK5B,OAAO1B,KAAK2C,SAAS/C,EAAEgC,MAAME,eAAe,kBAAkB,KAAKqB,KAAK,QAAQ,MAAM,KAAKA,KAAK,SAAS,OAAM,EAAEvD,EAAAA,GAAAA,GAAE,GAAU2D,MAAAA,EAAE3D,EAAEgD,YAAY,cAAcW,GAAGA,EAAE/C,QAAQC,QAAQwC,WAAWvD,GAAQM,KAAAA,KAAKwD,QAAQ9D,EAAMmD,aAAe,OAAC,KAAK7C,KAAKwD,QAAh0D,QAAA,QAAA","file":"popup-f15b7460.b4408087.js","sourceRoot":"..","sourcesContent":["import{W as t,f as o,r as s,a as n,s as e,b as i,d as u}from\"./index-cb4cc784.js\";function h(t){if(t.nuPopupHandled)return;const o=function(t){const o=[];for(;t;){const s=t.nuButton;if(s&&s.popup){const t=s.popup.host;t&&o.push(t)}t=t.parentNode||t.host}return o}(t.target);u(this===window?document:this,\"[is-popup]\").forEach(s=>{o.includes(s)||(s.nuPopup&&s.nuPopup.close(),t.nuPopupHandled=!0)})}function p(t){t.nuPopupEventsBinded||[\"mousedown\",\"touchstart\",\"focusin\"].forEach(o=>{t.addEventListener(o,h.bind(t),{passive:!0}),t.nuPopupEventsBinded=!0})}p(window);export default class extends t{static get params(){return{provideValue:!1,contextValue:!1,linkValue:!1,linkHostValue:!1}}init(){this.host.nuPopup=this,super.init(),this.hasAttr(\"theme\")||this.setAttr(\"theme\",\"main\"),this.setMod(\"popup\",!0),this.on(\"mousedown\",t=>{t.stopPropagation()}),this.on(\"click\",t=>{t.stopPropagation()}),this.on(\"keydown\",t=>{const{button:o}=this;\"Escape\"===t.key&&(o&&this.close(),t.stopPropagation()),\"Enter\"!==t.key&&\" \"!==t.key||t.stopPropagation()}),this.on(\"mouseenter\",()=>{this.button&&this.button.host.style.setProperty(\"--nu-local-mark-color\",\"transparent\")}),this.on(\"mouseleave\",()=>{this.button&&this.button.host.style.removeProperty(\"--nu-local-mark-color\")})}connected(){const{host:t}=this,o=t.nuContext.$shadowRoot;o&&p(o),this.setContext(\"popup\",this),this.provideAction(\"close\",t=>{this.close(),t&&this.doAction(\"close\")}),this.linkContext(\"button\",(t,o)=>{o&&o.unlinkPopup(this),t&&t.linkPopup(this)}),this.close(!0)}disconnected(){this.close(),this.button&&this.button.unlinkPopup(this),delete this.button}open(){const{host:t}=this;function u(){const o=n(t,\"[is-current]\");if(o&&(e(t,o),i(o)))return o.focus(),!0;let s;return s=i(t)?t:t.nuDeepQuery('input, [tabindex]:not([tabindex=\"-1\"]):not([disabled])'),s&&i(s)?(s.focus(),!0):void 0}this.isOpen||(t.nu(\"fixate\").then(t=>t.start()),this.openEffect(!0),this.button&&this.button.host.nuSetAria(\"expanded\",!0),o(t),this.emit(\"open\",null),this.emit(\"toggle\",null),s(t,!0),u()||setTimeout(u,100))}close(t=!1){const{host:o}=this;if(!this.isOpen)return;if(o.nu(\"fixate\").then(t=>t.end()),this.openEffect(!1),t)return;this.button&&(this.button.set(!1),this.button.host.focus()),o.style.removeProperty(\"--nu-transform\"),this.emit(\"close\",null),this.emit(\"toggle\",null),s(o,!0);const n=o.nuDeepQuery(\"[is-popup]\");n&&n.nuPopup.close()}openEffect(t){this.host.hidden=!t}get isOpen(){return!this.host.hidden}}\n"]}