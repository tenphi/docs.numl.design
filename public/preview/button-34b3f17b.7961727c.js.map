{"version":3,"sources":["numl/button-34b3f17b.js"],"names":["t","params","input","role","init","value","offValue","require","host","props","to","pressed","set","checked","selected","setMod","e","nuButton","on","key","nuHasAria","listbox","ignorePopup","nuListBoxHandled","focus","onKeyDown","setTimeout","nuRole","radioGroup","changed","connected","linkContext","verifyRadioGroup","createLink","setContext","s","$link","href","target","newTab","setAttr","itemRole","counter","setValue","String","fromContextValue","linkPopup","popup","setAria","unlinkPopup","nuSetAria","constructor","setAttribute","nuUniqId","appendChild","addEventListener","disabled","preventDefault","button","tap","stopPropagation","includes","removeAttribute","removeChild","click","startsWith","slice","o","scrollIntoView","behavior","getAttribute","scrollto","nuScrollTo","replace","i","metaKey","shiftKey","route","doAction","emit","isToggle","toggle","control","doActions","emitValue","isUnpressable","isRadio","nu","then","isCheckbox","isSelectable","hasAttr","toggleInnerPopup","nuDeepQuery","nuPopup","setByValue","getTypedValue","hasAttribute","valueBubbled","apply"],"mappings":";AAAgH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAhH,IAAA,EAAA,QAAA,uBAAiG,MAAcA,UAAAA,EAAd,EAA2BC,oBAAe,MAAA,CAACC,OAAM,EAAGC,KAAK,UAAUC,OAAYC,KAAAA,MAAM,KAAK,KAAKC,SAAS,KAAK,KAAKC,QAAQ,SAAS,aAAmBP,MAAAA,GAAE,EAAE,EAAA,GAAA,KAAKQ,KAAK,WAAgBC,KAAAA,MAAMC,GAAG,KAAK,KAAKD,MAAME,QAAQX,CAAAA,GAAG,KAAKY,IAAI,MAAMZ,GAAE,IAAI,KAAKS,MAAMI,QAAQb,EAAE,KAAKS,MAAMK,SAASd,EAAE,KAAKe,OAAO,OAAM,GAAI,MAAMX,OAAY,MAACI,KAAKQ,GAAG,KAAKA,EAAEC,SAAS,KAAK,KAAKC,GAAG,UAAUlB,IAAeA,WAAAA,EAAEmB,KAAKH,EAAEI,UAAU,aAAa,KAAKR,KAAI,GAAI,KAAKS,UAAU,KAAKC,aAAY,EAAGtB,EAAEuB,mBAAmB,KAAKF,QAAQb,KAAKgB,QAAQ,KAAKH,QAAQI,UAAUzB,IAAI0B,WAAW,KAAUJ,KAAAA,aAAY,GAAI,QAAQ,KAAKJ,GAAG,MAAMlB,KAAKA,EAAE2B,QAAQ,KAAKxB,OAAOH,EAAE2B,OAAO,KAAKxB,QAAQ,KAAKyB,WAAW,KAAK,KAAKlB,IAAI,KAAKmB,QAAQ,KAAK,KAAKnB,IAAIoB,YAAkBA,MAAAA,YAAY,KAAKC,YAAY,aAAa,IAAI,KAAKC,mBAAmB,cAAc,WAAW,KAAK7B,MAAM,KAAKO,KAAK,KAAKP,KAAK,QAAQ,KAAK8B,aAAa,KAAKC,WAAW,SAAS,MAAML,QAAQ7B,EAAEmC,GAAM,GAAA,MAAMN,QAAQ7B,EAAEmC,GAAG,OAAOnC,EAAE,CAAMiC,KAAAA,aAAkB,MAACG,MAAMpC,GAAG,KAAKA,IAAIA,EAAEqC,KAAK,KAAKA,KAAKrC,EAAEsC,OAAO,KAAKC,OAAO,SAAS,UAAUP,mBAAyBhC,MAAAA,EAAE,KAAK4B,WAAW5B,IAAI,KAAKwC,QAAQ,aAAa,IAAI,KAAKrC,KAAKH,EAAEC,OAAOwC,SAAS,MAAM,KAAKpC,QAAQL,EAAE0C,UAAU1C,EAAE0C,QAAQ,GAAG,KAAKC,SAASC,OAAO5C,EAAE0C,aAAa,KAAKG,iBAAiB7C,EAAEK,QAAQyC,UAAU9C,GAAQ+C,KAAAA,QAAQ,KAAKA,MAAM/C,EAAE,KAAKgD,QAAQ,YAAW,GAAI,KAAKA,QAAQ,WAAW,KAAKrC,UAAS,GAAI,KAAKI,OAAO,YAAW,GAAI,KAAKM,SAAS,KAAK2B,QAAQ,WAAW,YAAYC,YAAYjD,GAAM,GAAA,KAAK+C,QAAQ/C,EAAE,OAAY,MAACQ,KAAK2B,GAAG,YAAY,KAAKY,MAAMZ,EAAEe,UAAU,WAAW,MAAMf,EAAEe,UAAU,WAAW,MAAM,KAAK/C,KAAK,KAAKK,KAAK2C,YAAYxB,OAAO,KAAKZ,OAAO,YAAW,GAAIkB,aAAkB,MAACzB,KAAKR,GAAG,KAASmC,IAAAA,EAAOzB,KAAAA,IAAI,KAAK0B,MAAMD,EAAE,KAAKC,QAAOD,GAAE,EAAE,EAAA,GAAA,MAAOE,KAAK,KAAKA,KAAKF,EAAEG,OAAO,KAAKC,OAAO,SAAS,QAAQJ,EAAEiB,aAAa,WAAW,MAAMjB,EAAEiB,aAAa,kBAAkBpD,EAAEqD,UAAU,KAAKjB,MAAMD,EAAET,WAAW,IAAI1B,EAAEsD,YAAY,KAAKlB,QAAQ,KAAKA,MAAMmB,iBAAiB,QAAQvD,IAASwD,KAAAA,SAASxD,EAAEyD,kBAAkB,IAAIzD,EAAE0D,QAAQ,KAAKF,UAAU,KAAKG,IAAI3D,GAAGA,EAAE4D,sBAAsBzB,EAAEE,KAAK,KAAKA,KAAKF,EAAEG,OAAO,KAAKC,OAAO,SAAS,SAASJ,GAAGA,EAAEE,MAAMwB,SAAS,MAAM,KAAKzB,MAAMgB,aAAa,MAAM,cAAc,KAAKhB,MAAM0B,gBAAgB,QAAQ,KAAK1B,eAAe,KAAKA,MAAMpC,EAAE+D,YAAY,KAAK3B,QAAQuB,IAAI3D,GAAQ,MAACQ,KAAK2B,GAAG,KAAQ,GAAA,KAAKzB,IAAIV,EAAEsC,SAAS,KAAKF,MAAM,KAAKA,MAAM4B,YAAY,CAAI,GAAA,KAAKtD,IAAIV,EAAEsC,SAAS,KAAKF,OAAO,KAAKC,KAAK4B,WAAW,KAAK,CAAOjD,MAAAA,EAAE,KAAKqB,KAAK6B,MAAM,GAAGC,GAAE,EAAEhC,EAAAA,GAAAA,EAAEnB,GAAMmD,GAAAA,EAAE,OAAOA,EAAEC,eAAe,CAACC,SAAS,WAAWrE,EAAEyD,sBAAsB,EAAE,EAAA,IAAA,GAAO,IAAC,KAAKD,UAAU,OAAOrB,EAAEmC,aAAa,YAAY,CAAI,GAAA,KAAKC,UAAUpC,EAAEqC,WAAW,KAAKD,UAAU,KAAK7D,GAAG,CAAOyB,MAAAA,EAAE,KAAKzB,GAAGM,EAAEmB,EAAEsC,QAAQ,KAAK,IAAIC,EAAEvC,EAAE8B,WAAW,MAAMjE,EAAE2E,SAAS3E,EAAE4E,SAAWC,EAAAA,EAAAA,MAAM7D,EAAE0D,KAAK1E,EAAEyD,iBAAiBzD,EAAE4D,mBAAmB,KAAKkB,SAAS,SAAQ,GAAIpD,WAAW,KAAUqD,KAAAA,KAAK,QAAQ,GAAG,KAAKC,WAAW,KAAKC,UAAU,KAAKlC,OAAO,KAAKmC,UAAU,KAAKC,UAAU,KAAK9E,UAAc+E,gBAAmB,OAAA,KAAKJ,WAAW,MAAM,KAAK3E,MAAM,KAAKM,QAAQ,KAAKN,MAAM,MAAM,KAAKC,SAAS,KAAKA,SAAS,KAAKD,MAAM,KAAKM,QAAQ,KAAKN,MAAM4E,SAAcD,KAAAA,aAAa,KAAKrE,UAAU,KAAK0E,iBAAiB,KAAKzE,KAAK,KAAKD,UAAUC,IAAIZ,EAAEmC,EAAEnB,GAAMhB,GAAAA,IAAI,KAAKW,QAAQ,OAAU,IAAC,KAAKqE,aAAahE,EAAE,OAAY,MAACR,KAAKkE,GAAG,KAAK1E,EAAEA,IAAG,EAAG,KAAKW,QAAQX,EAAE,KAAKsF,WAAWZ,EAAEa,GAAG,aAAaC,KAAKrD,GAAGA,EAAEvB,KAAKZ,IAAI,KAAKwD,WAAW,KAAKT,MAAM2B,EAAExB,UAAU,WAAWlD,GAAG,KAAKyF,aAAaf,EAAExB,UAAU,UAAUlD,GAAG,KAAK0F,eAAehB,EAAExB,UAAU,WAAWlD,GAAG0E,EAAExB,UAAU,UAAUlD,IAAImC,GAAG,KAAK6C,aAAa,KAAKD,KAAK,UAAU,KAAKpE,SAAS,KAAKoC,OAAO,KAAKgC,KAAK,QAAQ,KAAKK,YAAY,KAAKrC,OAAO,KAAKmC,QAAQ/C,GAAG,KAAKwD,QAAQ,YAAY3F,GAAG,KAAKqB,SAAS,KAAKA,QAAQb,KAAKgB,QAAQ,KAAKT,OAAO,UAAUf,GAAG,KAAKkC,WAAW,YAAYlC,GAAGA,GAAG,KAAKmF,UAAU,KAAK9E,OAAO,KAAKuF,mBAAmBA,iBAAiB5F,GAASmC,MAAAA,EAAE,KAAK3B,KAAKqF,YAAY,cAAc7E,EAAE,MAAMhB,EAAE,KAAKW,QAAQ,OAAO,QAAQX,EAAE,OAAO,QAAQmC,GAAGA,EAAE2D,QAAQ9E,KAAK2B,SAAS3C,EAAEmC,GAAQb,KAAAA,aAAa,KAAKsE,kBAAiB,GAAI,MAAMjD,SAAS3C,EAAEmC,GAAG4D,WAAW/F,GAAOmC,IAAAA,EAAE,KAAK9B,MAAMW,EAAE,KAAKV,SAAY,GAAA,MAAM6B,EAAE,OAAOA,EAAE,KAAK6D,cAAc7D,IAAG,EAAEA,EAAAA,GAAAA,EAAEnC,GAAG,KAAKY,KAAI,IAAK,MAAMI,IAAIA,EAAE,KAAKgF,cAAchF,IAAI,KAAKJ,KAAI,IAAUA,KAAAA,IAAI,MAAMZ,GAAGgF,WAAgB,MAACxE,KAAKR,GAAG,KAAYA,OAAAA,EAAEiG,aAAa,WAAWjG,EAAEoB,UAAU,YAAYpB,EAAEoB,UAAU,aAAapB,EAAEoB,UAAU,YAAYpB,EAAEoB,UAAU,aAAa,CAAC,WAAW,QAAQ,MAAM,UAAUyC,SAAS,KAAK1D,MAAMkF,gBAAsB,OAAC,CAAC,QAAQ,OAAOxB,SAAS,KAAK1D,MAAMmF,UAAgB,MAAA,CAAC,QAAQ,OAAOzB,SAAS,KAAK1D,MAAMuF,eAAqB,MAAA,CAAC,OAAO7B,SAAS,KAAK1D,MAAMsF,aAAmB,MAAA,CAAC,QAAQ,WAAW,UAAU5B,SAAS,KAAK1D,MAAM0C,iBAAiB7C,GAAQgF,KAAAA,YAAY,MAAMhF,GAAG,KAAKY,KAAI,EAAE,EAAA,GAAA,KAAKP,MAAML,IAAIkF,QAAQlF,GAAOmC,IAAAA,EAAE,KAAU6C,KAAAA,aAAa,KAAKkB,eAAe/D,IAAI,KAAKxB,SAAS,KAAK4E,GAAG,WAAWC,KAAKxE,GAAGA,EAAEmF,MAAMhE,EAAE,KAAK6D,cAAc,KAAKZ,WAAWpF,IAAQqC,WAAY,MAAC3B,GAAGV,EAAE,IAAI,KAAYA,OAAAA,EAAEyE,QAAQ,KAAK,IAAQlC,aAAc,MAAC7B,GAAGV,EAAE,IAAI,KAAYA,OAAAA,EAAEiE,WAAW,MAA32J,QAAA,QAAA","file":"button-34b3f17b.7961727c.js","sourceRoot":"..","sourcesContent":["import{W as t,A as s,h as e,q as i,g as h,j as o,i as l}from\"./index-dbc64107.js\";export default class extends t{static get params(){return{input:!0,role:\"button\"}}init(){this.value=null,this.offValue=null,this.require(\"active\",\"focusable\");const t=s(this.host,\"pressed\");this.props.to=null,this.props.pressed=t=>this.set(null!=t,!0),this.props.checked=t,this.props.selected=t,this.setMod(\"btn\",!0),super.init();const{host:e}=this;e.nuButton=this,this.on(\"keydown\",t=>{\"Escape\"===t.key&&e.nuHasAria(\"expanded\")&&this.set(!1),this.listbox&&(this.ignorePopup=!0,t.nuListBoxHandled||(this.listbox.host.focus(),this.listbox.onKeyDown(t)),setTimeout(()=>{this.ignorePopup=!1},100))}),this.on(\"tap\",t=>{!t.nuRole&&this.role&&(t.nuRole=this.role)}),this.radioGroup=null,this.to&&this.changed(\"to\",this.to)}connected(){super.connected(),this.linkContext(\"radiogroup\",()=>this.verifyRadioGroup(),\"radioGroup\"),\"button\"===this.role&&this.to&&(this.role=\"link\"),this.createLink(),this.setContext(\"button\",this)}changed(t,s){if(super.changed(t,s),\"to\"===t){this.createLink();const{$link:t}=this;t&&(t.href=this.href,t.target=this.newTab?\"_blank\":\"_self\")}}verifyRadioGroup(){const t=this.radioGroup;t&&(this.setAttr(\"link-value\",\"\"),this.role=t.params.itemRole,null==this.value&&(t.counter||(t.counter=0),this.setValue(String(t.counter++))),this.fromContextValue(t.value))}linkPopup(t){this.popup||(this.popup=t,this.setAria(\"haspopup\",!0),this.setAria(\"expanded\",this.pressed||!1),this.setMod(\"dropdown\",!0),this.listbox&&this.setAria(\"haspopup\",\"listbox\"))}unlinkPopup(t){if(this.popup!==t)return;const{host:s}=this;delete this.popup,s.nuSetAria(\"haspopup\",null),s.nuSetAria(\"expanded\",null),this.role=this.host.constructor.nuRole,this.setMod(\"dropdown\",!1)}createLink(){const{host:t}=this;let s;this.to?(this.$link?s=this.$link:(s=e(\"a\"),s.href=this.href,s.target=this.newTab?\"_blank\":\"_self\",s.setAttribute(\"tabindex\",\"-1\"),s.setAttribute(\"aria-labelledby\",t.nuUniqId),this.$link=s,setTimeout(()=>t.appendChild(this.$link)),this.$link.addEventListener(\"click\",t=>{this.disabled?t.preventDefault():(0!==t.button||this.disabled||this.tap(t),t.stopPropagation())})),s.href=this.href,s.target=this.newTab?\"_blank\":\"_self\",(s&&s.href).includes(\"//\")?this.$link.setAttribute(\"rel\",\"noreferrer\"):this.$link.removeAttribute(\"rel\")):this.$link&&(delete this.$link,t.removeChild(this.$link))}tap(t){const{host:s}=this;if(this.to&&t.target!==this.$link)this.$link.click();else{if(this.to&&t.target===this.$link&&this.href.startsWith(\"#\")){const e=this.href.slice(1),o=i(s,e);if(o)return o.scrollIntoView({behavior:\"smooth\"}),t.preventDefault(),void h(!0)}if(!this.disabled&&\"-1\"!==s.getAttribute(\"tabindex\")){if(this.scrollto&&s.nuScrollTo(this.scrollto),this.to){const s=this.to,e=s.replace(/^!/,\"\"),i=s.startsWith(\"!\")||t.metaKey||t.shiftKey;o.route(e,i)||(t.preventDefault(),t.stopPropagation()),this.doAction(\"close\",!0)}setTimeout(()=>{this.emit(\"tap\")},0),this.isToggle()?this.toggle():(this.popup||this.control(),this.doActions(this.value))}}}get emitValue(){return this.isToggle()?null!=this.value?this.pressed?this.value:null!=this.offValue?this.offValue:this.value:this.pressed:this.value}toggle(){this.isToggle()&&(this.pressed&&!this.isUnpressable()||this.set(!this.pressed))}set(t,s,e){if(t===this.pressed)return;if(!this.isToggle()&&!e)return;const{host:i}=this;t=t||!1,this.pressed=t,this.isRadio()&&i.nu(\"focusable\").then(s=>s.set(!t&&!this.disabled)),this.popup?i.nuSetAria(\"expanded\",t):this.isCheckbox()?i.nuSetAria(\"checked\",t):this.isSelectable()?i.nuSetAria(\"selected\",t):i.nuSetAria(\"pressed\",t),!s&&this.isToggle()&&(this.emit(\"pressed\",this.pressed),this.popup||this.emit(\"input\",this.emitValue)),this.popup||this.control(s&!this.hasAttr(\"trigger\")),t&&this.listbox&&this.listbox.host.focus(),this.setMod(\"pressed\",t),this.setContext(\"disabled\",!t),t&&this.doActions(this.value),this.toggleInnerPopup()}toggleInnerPopup(t){const s=this.host.nuDeepQuery(\"[is-popup]\"),e=null==t?this.pressed?\"open\":\"close\":t?\"open\":\"close\";s&&s.nuPopup[e]()}setValue(t,s){this.ignorePopup||this.toggleInnerPopup(!1),super.setValue(t,s)}setByValue(t){let s=this.value,e=this.offValue;if(null!=s)return s=this.getTypedValue(s),l(s,t)?this.set(!0):(null!=e&&(e=this.getTypedValue(e)),this.set(!1));this.set(null!=t)}isToggle(){const{host:t}=this;return t.hasAttribute(\"toggle\")||t.nuHasAria(\"pressed\")||t.nuHasAria(\"expanded\")||t.nuHasAria(\"checked\")||t.nuHasAria(\"selected\")||[\"checkbox\",\"radio\",\"tab\",\"switch\"].includes(this.role)}isUnpressable(){return![\"radio\",\"tab\"].includes(this.role)}isRadio(){return[\"radio\",\"tab\"].includes(this.role)}isSelectable(){return[\"tab\"].includes(this.role)}isCheckbox(){return[\"radio\",\"checkbox\",\"switch\"].includes(this.role)}fromContextValue(t){this.isToggle()&&null!=t&&this.set(l(this.value,t))}control(t){let s=null;this.isToggle()&&!this.valueBubbled&&(s=!!this.pressed),this.nu(\"control\").then(e=>e.apply(s,this.getTypedValue(this.emitValue),t))}get href(){const{to:t=\"\"}=this;return t.replace(/^!/,\"\")}get newTab(){const{to:t=\"\"}=this;return t.startsWith(\"!\")}}\n"]}